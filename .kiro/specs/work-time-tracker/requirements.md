# 要件定義書

## はじめに

作業内容と作業時間をリアルタイムで記録し、オーダーに紐づけて管理できるツールです。サーバーレスで軽量、かつ直感的な操作で日々の作業記録を簡単にし、正確な時間計上による業務改善を目的としています。

## 用語集

- **システム**: 作業時間記録ツール
- **ユーザー**: ツールを使用して作業時間を記録する人
- **オーダー**: 複数のアクティビティで構成される作業単位
- **アクティビティ**: オーダー内の個別の作業項目
- **作業セッション**: 開始から終了までの連続した作業時間
- **ローカルストレージ**: ブラウザ内のデータ保存領域
- **履歴リセット**: 作業セッション履歴のみを削除する機能
- **全リセット**: 全てのデータを削除する機能

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、新しいオーダーを作成したいので、作業を適切に分類できるようになりたい

#### 受け入れ基準

1. THE システム SHALL オーダー名入力フィールドを提供する
2. WHEN ユーザーがオーダー作成ボタンをクリックしたとき、THE システム SHALL 新しいオーダーをローカルストレージに保存する
3. THE システム SHALL 作成されたオーダーを一覧表示する
4. THE システム SHALL オーダーの編集と削除機能を提供する

### 要件2

**ユーザーストーリー:** ユーザーとして、オーダー内にアクティビティを追加したいので、作業を細かく分類できるようになりたい

#### 受け入れ基準

1. WHEN ユーザーがオーダーを選択したとき、THE システム SHALL アクティビティ追加フォームを表示する
2. THE システム SHALL アクティビティ名入力フィールドを提供する
3. WHEN ユーザーがアクティビティを作成したとき、THE システム SHALL 選択されたオーダーに紐づけて保存する
4. THE システム SHALL アクティビティの編集と削除機能を提供する

### 要件3

**ユーザーストーリー:** ユーザーとして、作業時間をリアルタイムで記録したいので、正確な時間計上ができるようになりたい

#### 受け入れ基準

1. WHEN ユーザーがアクティビティボタンをクリックしたとき、THE システム SHALL 即座に作業時間の計測を開始する
2. WHILE 作業中、THE システム SHALL 経過時間をリアルタイムで表示する
3. WHEN ユーザーが他のアクティビティボタンをクリックしたとき、THE システム SHALL 現在の作業セッションを自動保存し新しいアクティビティの計測を開始する
4. WHEN ユーザーが作業終了ボタンをクリックしたとき、THE システム SHALL 現在の作業セッションを保存しタイマーを停止する
5. THE システム SHALL 現在作業中のアクティビティを視覚的に明示する

### 要件4

**ユーザーストーリー:** ユーザーとして、作業時間を集計して確認したいので、どの作業にどれだけ時間をかけたか把握できるようになりたい

#### 受け入れ基準

1. THE システム SHALL オーダー別の総作業時間を表示する
2. THE システム SHALL アクティビティ別の作業時間を表示する
3. THE システム SHALL 日別、週別、月別の集計機能を提供する
4. THE システム SHALL 作業履歴の詳細表示機能を提供する

### 要件5

**ユーザーストーリー:** ユーザーとして、データをエクスポートしたいので、外部ツールでの分析や保管ができるようになりたい

#### 受け入れ基準

1. THE システム SHALL 作業履歴をCSV形式でエクスポートする機能を提供する
2. THE システム SHALL 集計サマリーをCSV形式でエクスポートする機能を提供する
3. THE システム SHALL レポートを印刷用形式で表示する機能を提供する
4. THE システム SHALL エクスポート前に確認ダイアログを表示する

### 要件6

**ユーザーストーリー:** ユーザーとして、データを選択的にリセットしたいので、用途に応じて適切なデータクリアができるようになりたい

#### 受け入れ基準

1. THE システム SHALL 作業履歴のみをリセットする機能を提供する
2. THE システム SHALL 全てのデータをリセットする機能を提供する
3. WHEN ユーザーがリセット機能を実行する前に、THE システム SHALL 削除されるデータの詳細を表示する
4. THE システム SHALL リセット実行前に確認チェックボックスによる同意を求める
5. THE システム SHALL リセット機能を視覚的に区別して表示する

### 要件7

**ユーザーストーリー:** ユーザーとして、サーバーなしでツールを使用したいので、インターネット接続がなくても作業記録ができるようになりたい

#### 受け入れ基準

1. THE システム SHALL 端末のローカルストレージにデータを保存する
2. THE システム SHALL オフライン環境で完全に動作する
3. THE システム SHALL 外部サーバーへの通信を行わない
4. THE システム SHALL ブラウザの標準機能のみを使用する

### 要件8

**ユーザーストーリー:** ユーザーとして、エラーが発生した場合に適切な通知を受けたいので、問題を迅速に認識し対処できるようになりたい

#### 受け入れ基準

1. WHEN システムエラーが発生したとき、THE システム SHALL ユーザーに分かりやすいエラーメッセージを表示する
2. THE システム SHALL データの整合性チェック機能を提供する
3. WHEN データ破損が検出されたとき、THE システム SHALL 自動的に初期状態にリセットする
4. THE システム SHALL 操作完了時に成功通知を表示する